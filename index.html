<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é“¶çƒè€€ä¸–ï¼Œä¹’å‡ºæœªæ¥</title>
    <style>
        /* ä¿æŒåŸæœ‰CSSæ ·å¼å®Œå…¨ä¸å˜ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            background-image: url('background.jpg');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
        }
        
        .overlay {
            background-color: rgba(255, 255, 255, 0.85);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-image: url('background2.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 60px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(229, 57, 53, 0.7);
            z-index: 1;
        }
        
        .header-content {
            position: relative;
            z-index: 2;
        }
        
        .logo {
            font-size: 2.8rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .logo span {
            color: #ffeb3b;
        }
        
        .subtitle {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        nav {
            background-color: rgba(51, 51, 51, 0.9);
            padding: 10px 0;
        }
        
        nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
        }
        
        nav ul li {
            margin: 0 15px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav ul li a:hover {
            background-color: #e53935;
        }
        
        .auth-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        
        .auth-form {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }
        
        .auth-form h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #e53935;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #e53935;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #c62828;
        }
        
        .toggle-auth {
            text-align: center;
            margin-top: 15px;
        }
        
        .toggle-auth a {
            color: #e53935;
            text-decoration: none;
            font-weight: bold;
        }
        
        .section {
            margin-top: 40px;
            padding: 30px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 30px;
            color: #e53935;
            font-size: 2rem;
            border-bottom: 2px solid #e53935;
            padding-bottom: 10px;
        }
        
        .history-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            align-items: center;
        }
        
        .history-text {
            flex: 1;
            min-width: 300px;
        }
        
        .history-text p {
            text-indent: 2em;
            margin-bottom: 15px;
            line-height: 1.8;
        }
        
        .history-image {
            flex: 1;
            min-width: 300px;
            text-align: center;
        }
        
        .history-image img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }
        
        .player-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .player-card:hover {
            transform: translateY(-5px);
        }
        
        .player-img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }
        
        .player-info {
            padding: 20px;
        }
        
        .player-name {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #e53935;
        }
        
        .player-details {
            color: #666;
            margin-bottom: 15px;
        }
        
        .player-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e53935;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }
        
        .achievements-section {
            margin-top: 40px;
        }
        
        .achievement-card {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #e53935;
        }
        
        .achievement-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #e53935;
        }
        
        .achievement-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }
        
        .achievement-text {
            flex: 2;
            min-width: 300px;
        }
        
        .achievement-image {
            flex: 1;
            min-width: 200px;
            text-align: center;
        }
        
        .achievement-image img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .forum-container {
            margin-top: 20px;
        }
        
        .forum-post {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .post-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .post-author {
            font-weight: bold;
            color: #e53935;
        }
        
        .post-date {
            color: #666;
            font-size: 0.9rem;
        }
        
        .post-content {
            margin-bottom: 15px;
        }
        
        .post-actions {
            display: flex;
            gap: 15px;
        }
        
        .post-action {
            color: #666;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .post-action:hover {
            color: #e53935;
        }
        
        .new-post {
            margin-top: 30px;
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .new-post textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            min-height: 120px;
            margin-bottom: 15px;
        }
        
        footer {
            background-color: rgba(51, 51, 51, 0.9);
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 50px;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            nav ul li {
                margin: 5px 0;
            }
            
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .history-content, .achievement-content {
                flex-direction: column;
            }
            
            .logo {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="overlay">
        <header>
            <div class="container header-content">
                <div class="logo">é“¶çƒè€€ä¸–ï¼Œä¹’å‡ºæœªæ¥</div>
                <p class="subtitle">æ¢ç´¢ä¸–ç•Œé¡¶çº§ä¹’ä¹“çƒè¿åŠ¨å‘˜çš„ç²¾å½©æ•…äº‹</p>
            </div>
        </header>
        
        <nav>
            <div class="container">
                <ul>
                    <li><a href="#" class="nav-link" data-target="home">é¦–é¡µ</a></li>
                    <li><a href="#" class="nav-link" data-target="players">çƒæ˜Ÿèµ„æ–™</a></li>
                    <li><a href="#" class="nav-link" data-target="achievements">å¥–æ¯èƒŒå</a></li>
                    <li><a href="#" class="nav-link" data-target="forum">ç½‘å‹è®ºå›</a></li>
                    <li><a href="#" class="nav-link" data-target="login">é€€å‡ºç™»å½•</a></li>
                </ul>
            </div>
        </nav>
        
        <div class="container">
            <!-- ç™»å½•/æ³¨å†ŒåŒºåŸŸ -->
            <div id="auth-section" class="auth-container">
                <div class="auth-form">
                    <h2 id="auth-title">ç”¨æˆ·ç™»å½•</h2>
                    <form id="login-form">
                        <div class="form-group">
                            <label for="login-username">ç”¨æˆ·å</label>
                            <input type="text" id="login-username" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password">å¯†ç </label>
                            <input type="password" id="login-password" required>
                        </div>
                        <button type="submit" class="btn">ç™»å½•</button>
                    </form>
                    
                    <form id="register-form" class="hidden">
                        <div class="form-group">
                            <label for="register-username">ç”¨æˆ·å</label>
                            <input type="text" id="register-username" required>
                        </div>
                        <div class="form-group">
                            <label for="register-email">ç”µå­é‚®ç®±</label>
                            <input type="email" id="register-email" required>
                        </div>
                        <div class="form-group">
                            <label for="register-password">å¯†ç </label>
                            <input type="password" id="register-password" required>
                        </div>
                        <div class="form-group">
                            <label for="register-confirm">ç¡®è®¤å¯†ç </label>
                            <input type="password" id="register-confirm" required>
                        </div>
                        <button type="submit" class="btn">æ³¨å†Œ</button>
                    </form>
                    
                    <div class="toggle-auth">
                        <p id="toggle-text">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<a href="#" id="toggle-link">ç«‹å³æ³¨å†Œ</a></p>
                    </div>
                </div>
            </div>
            
            <!-- æ¬¢è¿åŒºåŸŸ -->
            <div id="welcome-section" class="hidden">
                <div style="text-align: center; padding: 40px 0;">
                    <h2 style="color: #e53935; margin-bottom: 20px;" id="welcome-message">æ¬¢è¿æ¥åˆ°ä¹’ä¹“çƒçƒæ˜Ÿèµ„æ–™åº“ï¼</h2>
                    <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto;">åœ¨è¿™é‡Œæ‚¨å¯ä»¥äº†è§£ä¸–ç•Œé¡¶çº§ä¹’ä¹“çƒè¿åŠ¨å‘˜çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»–ä»¬çš„èŒä¸šç”Ÿæ¶¯ã€æˆå°±å’Œæ¯”èµ›é£æ ¼ã€‚</p>
                </div>
            </div>
            
            <!-- å›½çƒå†å²åŒºåŸŸ -->
            <div id="history-section" class="section hidden">
                <h2 class="section-title">ä¸­å›½å›½çƒå†å²</h2>
                <div class="history-content">
                    <div class="history-text">
                        <p>ä¹’ä¹“çƒèµ·æºäº19ä¸–çºªæœ«çš„è‹±å›½ï¼Œæœ€åˆæ˜¯ä½œä¸ºé¤åå¨±ä¹æ´»åŠ¨ã€‚20ä¸–çºªåˆï¼Œä¹’ä¹“çƒä¼ å…¥ä¸­å›½ï¼Œå¹¶è¿…é€Ÿåœ¨å…¨å›½èŒƒå›´å†…æµè¡Œèµ·æ¥ã€‚</p>
                        <p>1959å¹´ï¼Œå®¹å›½å›¢åœ¨ç¬¬25å±Šä¸–ç•Œä¹’ä¹“çƒé”¦æ ‡èµ›ä¸Šå¤ºå¾—ç”·å­å•æ‰“å† å†›ï¼Œè¿™æ˜¯æ–°ä¸­å›½è·å¾—çš„ç¬¬ä¸€ä¸ªä¸–ç•Œå† å†›ï¼Œä»æ­¤ä¹’ä¹“çƒè¢«å°Šä¸ºä¸­å›½çš„"å›½çƒ"ã€‚</p>
                        <p>1971å¹´ï¼Œä¸­ç¾"ä¹’ä¹“å¤–äº¤"æ‰“ç ´äº†ä¸­ç¾ä¸¤å›½é•¿è¾¾20å¤šå¹´çš„å¤–äº¤åƒµå±€ï¼Œä¸ºä¸¤å›½å…³ç³»æ­£å¸¸åŒ–åˆ›é€ äº†æ¡ä»¶ï¼Œè¢«èª‰ä¸º"å°çƒè½¬åŠ¨å¤§çƒ"ã€‚</p>
                        <p>è‡ª1988å¹´ä¹’ä¹“çƒæˆä¸ºå¥¥è¿ä¼šæ­£å¼æ¯”èµ›é¡¹ç›®ä»¥æ¥ï¼Œä¸­å›½ä¹’ä¹“çƒé˜Ÿå…±è·å¾—äº†32æšå¥¥è¿é‡‘ç‰Œä¸­çš„28æšï¼Œå±•ç°äº†ç»å¯¹çš„ç»Ÿæ²»åŠ›ã€‚</p>
                        <p>ä¸­å›½ä¹’ä¹“çƒé˜ŸåŸ¹å…»å‡ºäº†ä¸€ä»£åˆä¸€ä»£çš„ä¸–ç•Œå† å†›ï¼Œä»åº„åˆ™æ ‹ã€é‚±é’Ÿæƒ åˆ°åˆ˜å›½æ¢ã€å­”ä»¤è¾‰ï¼Œå†åˆ°é©¬é¾™ã€å¼ ç»§ç§‘ã€ä¸å®ã€åˆ˜è¯—é›¯ï¼Œä»¥åŠç°åœ¨çš„æ¨ŠæŒ¯ä¸œã€å­™é¢–èç­‰æ–°ç”Ÿä»£çƒå‘˜ã€‚</p>
                    </div>
                    <div class="history-image">
                        <img src="history.jpg" alt="ä¸­å›½ä¹’ä¹“çƒå†å²">
                    </div>
                </div>
            </div>
            
            <!-- çƒæ˜Ÿèµ„æ–™åŒºåŸŸ -->
            <div id="players-section" class="section hidden">
                <h2 class="section-title">çƒæ˜Ÿèµ„æ–™</h2>
                <div class="players-grid">
                    <!-- å­™é¢–è -->
                    <div class="player-card">
                        <img src="shasha.jpg" alt="å­™é¢–è" class="player-img">
                        <div class="player-info">
                            <h3 class="player-name">å­™é¢–è</h3>
                            <div class="player-details">
                                <p><strong>å›½ç±ï¼š</strong>ä¸­å›½</p>
                                <p><strong>å‡ºç”Ÿæ—¥æœŸï¼š</strong>2000å¹´11æœˆ4æ—¥</p>
                                <p><strong>æŒæ‹æ‰‹ï¼š</strong>å³æ‰‹æ¨ªæ‹</p>
                                <p><strong>æ‰“æ³•ï¼š</strong>å¿«æ”»ç»“åˆå¼§åœˆ</p>
                            </div>
                            <p>å­™é¢–èæ˜¯ä¸­å›½å¥³å­ä¹’ä¹“çƒæ–°ç”Ÿä»£é¢†å†›äººç‰©ï¼Œä»¥å…¶å‡ºè‰²çš„æŠ€æœ¯å’Œå¼ºå¤§çš„å¿ƒç†ç´ è´¨è‘—ç§°ï¼Œè¢«èª‰ä¸º"å°é­”ç‹"ã€‚</p>
                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">3</div>
                                    <div class="stat-label">ä¸–ç•Œå† å†›</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">1</div>
                                    <div class="stat-label">å¥¥è¿é‡‘ç‰Œ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">2</div>
                                    <div class="stat-label">ä¸–é”¦èµ›å† å†›</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ¨ŠæŒ¯ä¸œ -->
                    <div class="player-card">
                        <img src="fanzhendong.jpg" alt="æ¨ŠæŒ¯ä¸œ" class="player-img">
                        <div class="player-info">
                            <h3 class="player-name">æ¨ŠæŒ¯ä¸œ</h3>
                            <div class="player-details">
                                <p><strong>å›½ç±ï¼š</strong>ä¸­å›½</p>
                                <p><strong>å‡ºç”Ÿæ—¥æœŸï¼š</strong>1997å¹´1æœˆ22æ—¥</p>
                                <p><strong>æŒæ‹æ‰‹ï¼š</strong>å³æ‰‹æ¨ªæ‹</p>
                                <p><strong>æ‰“æ³•ï¼š</strong>å¼ºåŠ›å¼§åœˆç»“åˆå¿«æ”»</p>
                            </div>
                            <p>æ¨ŠæŒ¯ä¸œæ˜¯ä¸­å›½ç”·å­ä¹’ä¹“çƒé˜Ÿçš„æ ¸å¿ƒä¸»åŠ›ï¼Œä»¥å…¶å¼ºå¤§çš„æ­£æ‰‹å’Œå…¨é¢çš„æŠ€æœ¯é—»åï¼Œè¢«èª‰ä¸º"å°èƒ–"ã€‚</p>
                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">5</div>
                                    <div class="stat-label">ä¸–ç•Œå† å†›</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">1</div>
                                    <div class="stat-label">å¥¥è¿é‡‘ç‰Œ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">3</div>
                                    <div class="stat-label">ä¸–é”¦èµ›å† å†›</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é©¬é¾™ -->
                    <div class="player-card">
                        <img src="malong.jpg" alt="é©¬é¾™" class="player-img">
                        <div class="player-info">
                            <h3 class="player-name">é©¬é¾™</h3>
                            <div class="player-details">
                                <p><strong>å›½ç±ï¼š</strong>ä¸­å›½</p>
                                <p><strong>å‡ºç”Ÿæ—¥æœŸï¼š</strong>1988å¹´10æœˆ20æ—¥</p>
                                <p><strong>æŒæ‹æ‰‹ï¼š</strong>å³æ‰‹æ¨ªæ‹</p>
                                <p><strong>æ‰“æ³•ï¼š</strong>å…¨é¢å‹ï¼ŒæŠ€æœ¯æ— çŸ­æ¿</p>
                            </div>
                            <p>é©¬é¾™æ˜¯ä¹’ä¹“çƒå†å²ä¸Šæœ€ä¼Ÿå¤§çš„ç”·å­é€‰æ‰‹ä¹‹ä¸€ï¼Œå®ç°äº†åŒåœˆå¤§æ»¡è´¯ï¼Œè¢«èª‰ä¸º"é¾™é˜Ÿ"ã€‚</p>
                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">26</div>
                                    <div class="stat-label">ä¸–ç•Œå† å†›</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">5</div>
                                    <div class="stat-label">å¥¥è¿é‡‘ç‰Œ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">3</div>
                                    <div class="stat-label">ä¸–é”¦èµ›å† å†›</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é™ˆæ¢¦ -->
                    <div class="player-card">
                        <img src="chenmeng.jpg" alt="é™ˆæ¢¦" class="player-img">
                        <div class="player-info">
                            <h3 class="player-name">é™ˆæ¢¦</h3>
                            <div class="player-details">
                                <p><strong>å›½ç±ï¼š</strong>ä¸­å›½</p>
                                <p><strong>å‡ºç”Ÿæ—¥æœŸï¼š</strong>1994å¹´1æœˆ15æ—¥</p>
                                <p><strong>æŒæ‹æ‰‹ï¼š</strong>å³æ‰‹æ¨ªæ‹</p>
                                <p><strong>æ‰“æ³•ï¼š</strong>å…¨é¢å‹ï¼Œæ­£æ‰‹å¼ºåŠ¿</p>
                            </div>
                            <p>é™ˆæ¢¦æ˜¯ä¸­å›½å¥³å­ä¹’ä¹“çƒé˜Ÿçš„æ ¸å¿ƒä¸»åŠ›ï¼Œä»¥å…¶ç¨³å®šçš„æŠ€æœ¯å’Œå¼ºå¤§çš„å¿ƒç†ç´ è´¨è‘—ç§°ï¼Œæ˜¯2020å¹´ä¸œäº¬å¥¥è¿ä¼šå¥³å•å† å†›ã€‚</p>
                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">4</div>
                                    <div class="stat-label">ä¸–ç•Œå† å†›</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">1</div>
                                    <div class="stat-label">å¥¥è¿é‡‘ç‰Œ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">2</div>
                                    <div class="stat-label">ä¸–é”¦èµ›å† å†›</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç‹æ¥šé’¦ -->
                    <div class="player-card">
                        <img src="wangchuqin.jpg" alt="ç‹æ¥šé’¦" class="player-img">
                        <div class="player-info">
                            <h3 class="player-name">ç‹æ¥šé’¦</h3>
                            <div class="player-details">
                                <p><strong>å›½ç±ï¼š</strong>ä¸­å›½</p>
                                <p><strong>å‡ºç”Ÿæ—¥æœŸï¼š</strong>2000å¹´5æœˆ11æ—¥</p>
                                <p><strong>æŒæ‹æ‰‹ï¼š</strong>å·¦æ‰‹æ¨ªæ‹</p>
                                <p><strong>æ‰“æ³•ï¼š</strong>å¿«é€Ÿè¡”æ¥ï¼Œåæ‰‹å¼ºåŠ¿</p>
                            </div>
                            <p>ç‹æ¥šé’¦æ˜¯ä¸­å›½ç”·å­ä¹’ä¹“çƒé˜Ÿæ–°ç”Ÿä»£é¢†å†›äººç‰©ï¼Œä»¥å…¶å‡ºè‰²çš„æŠ€æœ¯å’Œå¼ºå¤§çš„å¿ƒç†ç´ è´¨è‘—ç§°ï¼Œè¢«èª‰ä¸º"å¤§å¤´"ã€‚</p>
                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">2</div>
                                    <div class="stat-label">ä¸–ç•Œå† å†›</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">1</div>
                                    <div class="stat-label">å¥¥è¿é‡‘ç‰Œ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">1</div>
                                    <div class="stat-label">ä¸–é”¦èµ›å† å†›</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å¥–æ¯èƒŒåçš„æ•…äº‹åŒºåŸŸ -->
            <div id="achievements-section" class="section hidden">
                <h2 class="section-title">å¥–æ¯èƒŒåçš„æ•…äº‹</h2>
                <div class="achievements-section">
                    <!-- å®¹å›½å›¢ -->
                    <div class="achievement-card">
                        <h3 class="achievement-title">å®¹å›½å›¢ - æ–°ä¸­å›½ç¬¬ä¸€ä¸ªä¸–ç•Œå† å†›</h3>
                        <div class="achievement-content">
                            <div class="achievement-text">
                                <p>1959å¹´ï¼Œåœ¨ç¬¬25å±Šä¸–ç•Œä¹’ä¹“çƒé”¦æ ‡èµ›ä¸Šï¼Œå®¹å›½å›¢å¤ºå¾—ç”·å­å•æ‰“å† å†›ï¼Œè¿™æ˜¯æ–°ä¸­å›½è·å¾—çš„ç¬¬ä¸€ä¸ªä¸–ç•Œå† å†›ã€‚å½“æ—¶ä¸­å›½æ­£å¤„äºå›°éš¾æ—¶æœŸï¼Œè¿™ä¸ªå† å†›æå¤§åœ°é¼“èˆäº†å…¨å›½äººæ°‘ã€‚</p>
                                <p>å®¹å›½å›¢å–Šå‡ºçš„"äººç”Ÿèƒ½æœ‰å‡ å›æ"æˆä¸ºæ¿€åŠ±ä¸€ä»£ä»£è¿åŠ¨å‘˜çš„åº§å³é“­ã€‚ä»–çš„èƒœåˆ©ä¸ä»…æ˜¯ä¸ªäººçš„è£è€€ï¼Œæ›´æ˜¯æ–°ä¸­å›½ä½“è‚²äº‹ä¸šçš„é‡Œç¨‹ç¢‘ï¼Œæ ‡å¿—ç€ä¸­å›½ä¹’ä¹“çƒå¼€å§‹èµ°å‘ä¸–ç•Œèˆå°ã€‚</p>
                                <p>å®¹å›½å›¢çš„æˆåŠŸèƒŒåæ˜¯æ— æ•°ä¸ªæ—¥å¤œçš„åˆ»è‹¦è®­ç»ƒå’Œå¯¹æŠ€æœ¯çš„ç²¾ç›Šæ±‚ç²¾ã€‚ä»–çš„èƒœåˆ©ä¸ºä¸­å›½ä¹’ä¹“çƒçš„å‘å±•å¥ å®šäº†åšå®åŸºç¡€ï¼Œå¼€å¯äº†"å›½çƒ"çš„è¾‰ç…Œå†ç¨‹ã€‚</p>
                            </div>
                            <div class="achievement-image">
                                <img src="rongguotuan.jpg" alt="å®¹å›½å›¢">
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸­ç¾ä¹’ä¹“å¤–äº¤ -->
                    <div class="achievement-card">
                        <h3 class="achievement-title">ä¸­ç¾ä¹’ä¹“å¤–äº¤ - å°çƒè½¬åŠ¨å¤§çƒ</h3>
                        <div class="achievement-content">
                            <div class="achievement-text">
                                <p>1971å¹´ï¼Œä¸­å›½ä¹’ä¹“çƒé˜Ÿé‚€è¯·ç¾å›½ä¹’ä¹“çƒé˜Ÿè®¿åï¼Œæ‰“å¼€äº†ä¸­ç¾ä¸¤å›½äººæ°‘å‹å¥½å¾€æ¥çš„å¤§é—¨ï¼Œä¸ºåæ¥å°¼å…‹æ¾è®¿åå’Œä¸­ç¾å»ºäº¤å¥ å®šäº†åŸºç¡€ã€‚</p>
                                <p>è¿™ä¸€äº‹ä»¶è¢«ç§°ä¸º"ä¹’ä¹“å¤–äº¤"ï¼Œæ˜¯å›½é™…å…³ç³»å²ä¸Šçš„ç»å…¸æ¡ˆä¾‹ï¼Œå±•ç°äº†ä½“è‚²è¶…è¶Šæ”¿æ²»çš„åŠ›é‡ã€‚ä¹’ä¹“çƒè¿™ä¸ªå°å°çš„çƒä½“ï¼Œæˆä¸ºäº†è¿æ¥ä¸¤ä¸ªå¤§å›½çš„æ¡¥æ¢ã€‚</p>
                                <p>è¿™æ¬¡å¤–äº¤çªç ´çš„èƒŒåï¼Œæ˜¯ä¸¤å›½è¿åŠ¨å‘˜çš„å‹è°Šå’Œç›¸äº’å°Šé‡ï¼Œä»¥åŠä¸¤å›½é¢†å¯¼äººçš„è¿œè§å“è¯†ã€‚å®ƒä¸ä»…æ”¹å˜äº†å›½é™…æ”¿æ²»æ ¼å±€ï¼Œä¹Ÿè®©ä¸–ç•Œçœ‹åˆ°äº†ä¸­å›½å¼€æ”¾çš„æ€åº¦ã€‚</p>
                            </div>
                            <div class="achievement-image">
                                <img src="zhongmeipingpongwaijiao.jpg" alt="ä¸­ç¾ä¹’ä¹“å¤–äº¤">
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç‹æ¥šé’¦ -->
                    <div class="achievement-card">
                        <h3 class="achievement-title">ç‹æ¥šé’¦ - æ–°ç”Ÿä»£é¢†å†›äººç‰©çš„å´›èµ·</h3>
                        <div class="achievement-content">
                            <div class="achievement-text">
                                <p>ç‹æ¥šé’¦ä½œä¸ºä¸­å›½ç”·å­ä¹’ä¹“çƒé˜Ÿæ–°ç”Ÿä»£çš„é¢†å†›äººç‰©ï¼Œä»¥å…¶å‡ºè‰²çš„æŠ€æœ¯å’Œå¼ºå¤§çš„å¿ƒç†ç´ è´¨è‘—ç§°ã€‚ä»–çš„æˆåŠŸå¹¶éä¸€å¸†é£é¡ºï¼Œç»å†äº†å¤šæ¬¡å¤±è´¥å’ŒæŒ«æŠ˜ã€‚</p>
                                <p>åœ¨2023å¹´å¾·ç­ä¸–ä¹’èµ›ä¸Šï¼Œç‹æ¥šé’¦å¤ºå¾—ç”·å•å† å†›ï¼Œè¿™æ˜¯ä»–èŒä¸šç”Ÿæ¶¯çš„é‡è¦çªç ´ã€‚æ¯”èµ›ä¸­ä»–å±•ç°äº†å‡ºè‰²çš„æŠ€æœ¯å’Œå¼ºå¤§çš„å¿ƒç†ç´ è´¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å…³é”®æ—¶åˆ»çš„ç¨³å®šå‘æŒ¥ã€‚</p>
                                <p>ç‹æ¥šé’¦çš„æˆåŠŸèƒŒåæ˜¯æ— æ•°æ¬¡çš„åˆ»è‹¦è®­ç»ƒå’Œå¯¹æŠ€æœ¯çš„ç²¾ç›Šæ±‚ç²¾ã€‚ä»–çš„å´›èµ·æ ‡å¿—ç€ä¸­å›½ä¹’ä¹“çƒæ–°ç”Ÿä»£çƒå‘˜çš„æˆç†Ÿï¼Œä¸ºä¸­å›½ä¹’ä¹“çƒçš„æœªæ¥å‘å±•å¥ å®šäº†åšå®åŸºç¡€ã€‚</p>
                            </div>
                            <div class="achievement-image">
                                <img src="wangchuqin1.jpg" alt="ç‹æ¥šé’¦">
                            </div>
                        </div>
                    </div>
                    
                    <!-- å­™é¢–è -->
                    <div class="achievement-card">
                        <h3 class="achievement-title">å­™é¢–è - å°é­”ç‹çš„æˆé•¿ä¹‹è·¯</h3>
                        <div class="achievement-content">
                            <div class="achievement-text">
                                <p>å­™é¢–èä½œä¸ºä¸­å›½å¥³å­ä¹’ä¹“çƒæ–°ç”Ÿä»£é¢†å†›äººç‰©ï¼Œä»¥å…¶å‡ºè‰²çš„æŠ€æœ¯å’Œå¼ºå¤§çš„å¿ƒç†ç´ è´¨è‘—ç§°ï¼Œè¢«èª‰ä¸º"å°é­”ç‹"ã€‚å¥¹çš„æˆé•¿ä¹‹è·¯å……æ»¡äº†æŒ‘æˆ˜å’Œçªç ´ã€‚</p>
                                <p>åœ¨2021å¹´ä¼‘æ–¯é¡¿ä¸–ä¹’èµ›ä¸Šï¼Œå­™é¢–èå¤ºå¾—å¥³å•å† å†›ï¼Œè¿™æ˜¯å¥¹èŒä¸šç”Ÿæ¶¯çš„é‡è¦é‡Œç¨‹ç¢‘ã€‚æ¯”èµ›ä¸­å¥¹å±•ç°äº†å…¨é¢çš„æŠ€æœ¯å’Œå¼ºå¤§çš„å¿ƒç†ç´ è´¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å…³é”®æ—¶åˆ»çš„ç¨³å®šå‘æŒ¥ã€‚</p>
                                <p>å­™é¢–èçš„æˆåŠŸèƒŒåæ˜¯æ— æ•°æ¬¡çš„åˆ»è‹¦è®­ç»ƒå’Œå¯¹æŠ€æœ¯çš„ç²¾ç›Šæ±‚ç²¾ã€‚å¥¹çš„å´›èµ·æ ‡å¿—ç€ä¸­å›½å¥³å­ä¹’ä¹“çƒæ–°ç”Ÿä»£çƒå‘˜çš„æˆç†Ÿï¼Œä¸ºä¸­å›½ä¹’ä¹“çƒçš„æœªæ¥å‘å±•å¥ å®šäº†åšå®åŸºç¡€ã€‚</p>
                            </div>
                            <div class="achievement-image">
                                <img src="shasha1.jpg" alt="å­™é¢–è">
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ¨ŠæŒ¯ä¸œ -->
                    <div class="achievement-card">
                        <h3 class="achievement-title">æ¨ŠæŒ¯ä¸œ - ä»å°èƒ–åˆ°ä¸–ç•Œç¬¬ä¸€çš„èœ•å˜</h3>
                        <div class="achievement-content">
                            <div class="achievement-text">
                                <p>æ¨ŠæŒ¯ä¸œä½œä¸ºä¸­å›½ç”·å­ä¹’ä¹“çƒé˜Ÿçš„æ ¸å¿ƒä¸»åŠ›ï¼Œä»¥å…¶å¼ºå¤§çš„æ­£æ‰‹å’Œå…¨é¢çš„æŠ€æœ¯é—»åã€‚ä»"å°èƒ–"åˆ°ä¸–ç•Œç¬¬ä¸€ï¼Œä»–çš„æˆé•¿ä¹‹è·¯å……æ»¡äº†è‰°è¾›å’Œçªç ´ã€‚</p>
                                <p>åœ¨2021å¹´ä¼‘æ–¯é¡¿ä¸–ä¹’èµ›ä¸Šï¼Œæ¨ŠæŒ¯ä¸œå¤ºå¾—ç”·å•å† å†›ï¼Œè¿™æ˜¯ä»–èŒä¸šç”Ÿæ¶¯çš„é‡è¦çªç ´ã€‚æ¯”èµ›ä¸­ä»–å±•ç°äº†å¼ºå¤§çš„æ­£æ‰‹å’Œå…¨é¢çš„æŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨å…³é”®æ—¶åˆ»çš„ç¨³å®šå‘æŒ¥ã€‚</p>
                                <p>æ¨ŠæŒ¯ä¸œçš„æˆåŠŸèƒŒåæ˜¯æ— æ•°æ¬¡çš„åˆ»è‹¦è®­ç»ƒå’Œå¯¹æŠ€æœ¯çš„ç²¾ç›Šæ±‚ç²¾ã€‚ä»–çš„å´›èµ·æ ‡å¿—ç€ä¸­å›½ç”·å­ä¹’ä¹“çƒæ–°ç”Ÿä»£çƒå‘˜çš„æˆç†Ÿï¼Œä¸ºä¸­å›½ä¹’ä¹“çƒçš„æœªæ¥å‘å±•å¥ å®šäº†åšå®åŸºç¡€ã€‚</p>
                            </div>
                            <div class="achievement-image">
                                <img src="fanzhendong1.jpg" alt="æ¨ŠæŒ¯ä¸œ">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç½‘å‹è®ºå›åŒºåŸŸ -->
            <div id="forum-section" class="section hidden">
                <h2 class="section-title">ç½‘å‹è®ºå›</h2>
                <div class="forum-container" id="forum-posts-container">
                    <!-- è¯„è®ºä¼šå®æ—¶åŠ è½½åˆ°è¿™é‡Œ -->
                </div>
                
                <div class="new-post" id="new-post-form">
                    <h3>å‘è¡¨è¯„è®º</h3>
                    <textarea id="new-post-content" placeholder="åœ¨è¿™é‡Œå†™ä¸‹æ‚¨æƒ³è®¨è®ºçš„å†…å®¹..." required></textarea>
                    <button class="btn" id="submit-post">å‘è¡¨è¯„è®º</button>
                </div>
            </div>
        </div>
        
        <footer>
            <div class="container">
                <p>Â© 2023 é“¶çƒè€€ä¸–ï¼Œä¹’å‡ºæœªæ¥ | æ¢ç´¢ä¹’ä¹“çƒçš„é­…åŠ›</p>
            </div>
        </footer>
    </div>

    <!-- å¼•å…¥Supabaseå®¢æˆ·ç«¯åº“ -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <script>
    // ==================== Supabaseé…ç½® ====================
    const supabaseUrl = 'https://evlbhdfjycjkoamuwmzx.supabase.co';
    const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV2bGJoZGZqeWNqa29hbXV3bXp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3NzU2MDEsImV4cCI6MjA4MTM1MTYwMX0.9gGfrOHOSG0tl2vsfynuoH2gzqQGIfouNrUKHzgWOXg';
    const forumTopicId = 'pingpong_forum';

    // ==================== é¡µé¢å…ƒç´  ====================
    const authSection = document.getElementById('auth-section');
    const welcomeSection = document.getElementById('welcome-section');
    const historySection = document.getElementById('history-section');
    const playersSection = document.getElementById('players-section');
    const achievementsSection = document.getElementById('achievements-section');
    const forumSection = document.getElementById('forum-section');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const authTitle = document.getElementById('auth-title');
    const toggleText = document.getElementById('toggle-text');
    const welcomeMessage = document.getElementById('welcome-message');
    const newPostContent = document.getElementById('new-post-content');
    const submitPost = document.getElementById('submit-post');
    const forumPostsContainer = document.getElementById('forum-posts-container');
    const newPostForm = document.getElementById('new-post-form');

    // ==================== å…¨å±€å˜é‡ ====================
    let supabase = null;
    let commentsSubscription = null;

    // ==================== åˆå§‹åŒ–å‡½æ•° ====================
    async function initializeApp() {
        console.log('ğŸ”„ å¼€å§‹åˆå§‹åŒ–åº”ç”¨ç¨‹åº...');
        
        // æ£€æŸ¥Supabaseåº“æ˜¯å¦åŠ è½½
        if (typeof window.supabase === 'undefined') {
            console.error('âŒ Supabaseåº“æœªåŠ è½½ï¼');
            displayError('ç³»ç»Ÿæ ¸å¿ƒåº“åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢');
            return;
        }
        
        try {
            // åˆ›å»ºSupabaseå®¢æˆ·ç«¯
            supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);
            console.log('âœ… Supabaseå®¢æˆ·ç«¯åˆå§‹åŒ–æˆåŠŸ');
            
            // æµ‹è¯•è¿æ¥
            await testConnection();
            
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            checkLoginStatus();
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
            initializeEventListeners();
            
        } catch (error) {
            console.error('âŒ åº”ç”¨ç¨‹åºåˆå§‹åŒ–å¤±è´¥:', error);
            displayError('ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥: ' + error.message);
        }
    }

    // æµ‹è¯•Supabaseè¿æ¥
    async function testConnection() {
        try {
            const { data, error } = await supabase
                .from('comments')
                .select('id')
                .limit(1);
                
            if (error) {
                console.warn('âš ï¸ Supabaseè¿æ¥æµ‹è¯•è­¦å‘Š:', error.message);
            } else {
                console.log('âœ… Supabaseè¿æ¥æˆåŠŸ');
            }
        } catch (err) {
            console.error('âŒ è¿æ¥æµ‹è¯•å¼‚å¸¸:', err);
        }
    }

    // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
    function displayError(message) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = `
            background-color: #ffebee;
            color: #c62828;
            padding: 15px;
            margin: 20px auto;
            border-radius: 8px;
            max-width: 800px;
            text-align: center;
            border: 1px solid #ef9a9a;
        `;
        errorDiv.innerHTML = `<strong>ç³»ç»Ÿæç¤ºï¼š</strong>${message}`;
        document.querySelector('.container').prepend(errorDiv);
    }

    // ==================== ç™»å½•/æ³¨å†ŒåŠŸèƒ½ ====================
    function showLoginForm() {
        loginForm.classList.remove('hidden');
        registerForm.classList.add('hidden');
        authTitle.textContent = 'ç”¨æˆ·ç™»å½•';
        toggleText.innerHTML = 'è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<a href="#" id="toggle-link">ç«‹å³æ³¨å†Œ</a>';
    }
    
    function showRegisterForm() {
        loginForm.classList.add('hidden');
        registerForm.classList.remove('hidden');
        authTitle.textContent = 'ç”¨æˆ·æ³¨å†Œ';
        toggleText.innerHTML = 'å·²æœ‰è´¦å·ï¼Ÿ<a href="#" id="toggle-link">ç«‹å³ç™»å½•</a>';
    }

    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    function checkLoginStatus() {
        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        const username = localStorage.getItem('username');
        
        if (isLoggedIn && username) {
            authSection.classList.add('hidden');
            welcomeSection.classList.remove('hidden');
            historySection.classList.remove('hidden');
            welcomeMessage.textContent = `æ¬¢è¿ï¼Œ${username}ï¼`;
            updateNavigation();
        } else {
            authSection.classList.remove('hidden');
            welcomeSection.classList.add('hidden');
            historySection.classList.add('hidden');
            playersSection.classList.add('hidden');
            achievementsSection.classList.add('hidden');
            forumSection.classList.add('hidden');
            showLoginForm();
        }
    }

    // æ›´æ–°å¯¼èˆªçŠ¶æ€
    function updateNavigation() {
        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        const loginLink = document.querySelector('.nav-link[data-target="login"]');
        
        if (loginLink) {
            loginLink.textContent = isLoggedIn ? 'é€€å‡ºç™»å½•' : 'ç™»å½•';
        }
    }

    // ==================== é¡µé¢åˆ‡æ¢åŠŸèƒ½ ====================
    function showSection(section) {
        // éšè—æ‰€æœ‰éƒ¨åˆ†
        authSection.classList.add('hidden');
        welcomeSection.classList.add('hidden');
        historySection.classList.add('hidden');
        playersSection.classList.add('hidden');
        achievementsSection.classList.add('hidden');
        forumSection.classList.add('hidden');
        
        // æ˜¾ç¤ºæŒ‡å®šéƒ¨åˆ†
        switch(section) {
            case 'login':
                authSection.classList.remove('hidden');
                showLoginForm();
                break;
            case 'home':
                welcomeSection.classList.remove('hidden');
                historySection.classList.remove('hidden');
                break;
            case 'players':
                playersSection.classList.remove('hidden');
                break;
            case 'achievements':
                achievementsSection.classList.remove('hidden');
                break;
            case 'forum':
                if (localStorage.getItem('isLoggedIn') === 'true') {
                    forumSection.classList.remove('hidden');
                    loadAndSubscribeToComments();
                } else {
                    showSection('login');
                }
                break;
        }
    }

    // ==================== è®ºå›åŠŸèƒ½ ====================
    // åŠ è½½å¹¶å®æ—¶ç›‘å¬è¯„è®º
    async function loadAndSubscribeToComments() {
        // å¦‚æœå·²æœ‰è®¢é˜…ï¼Œå…ˆå–æ¶ˆ
        if (commentsSubscription) {
            supabase.removeChannel(commentsSubscription);
        }
        
        // æ¸…ç©ºå½“å‰å¸–å­å®¹å™¨
        forumPostsContainer.innerHTML = '';
        
        // é¦–å…ˆè·å–æ‰€æœ‰ç°æœ‰è¯„è®º
        await fetchComments();
        
        // å»ºç«‹å®æ—¶ç›‘å¬
        commentsSubscription = supabase
            .channel('forum-comments')
            .on('postgres_changes',
                { 
                    event: 'INSERT', 
                    schema: 'public', 
                    table: 'comments',
                    filter: `topic_id=eq.${forumTopicId}`
                },
                (payload) => {
                    prependComment(payload.new);
                }
            )
            .subscribe();
    }

    // è·å–æ‰€æœ‰å†å²è¯„è®º
    async function fetchComments() {
        try {
            const { data: comments, error } = await supabase
                .from('comments')
                .select('*')
                .eq('topic_id', forumTopicId)
                .order('created_at', { ascending: false });

            if (error) {
                throw error;
            }
            
            displayComments(comments);
        } catch (error) {
            console.error('åŠ è½½è¯„è®ºå¤±è´¥:', error);
            displayErrorMessage('è¯„è®ºåŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚');
        }
    }

    // åœ¨é¡µé¢ä¸Šå±•ç¤ºè¯„è®ºåˆ—è¡¨
    function displayComments(comments) {
        if (!comments || comments.length === 0) {
            forumPostsContainer.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«æ¥ç¬¬ä¸€ä¸ªå‘è¨€å§ï¼</p>';
            return;
        }
        
        forumPostsContainer.innerHTML = comments.map(comment => formatComment(comment)).join('');
    }

    // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
    function displayErrorMessage(message) {
        forumPostsContainer.innerHTML = `<p style="color: #e53935; text-align: center; padding: 20px;">${message}</p>`;
    }

    // å°†å•æ¡è¯„è®ºæ ¼å¼åŒ–ä¸ºHTML
    function formatComment(comment) {
        let displayDate = 'åˆšåˆš';
        if (comment.created_at) {
            try {
                const date = new Date(comment.created_at);
                displayDate = date.toLocaleDateString('zh-CN') + ' ' + 
                            date.toLocaleTimeString('zh-CN', { 
                                hour: '2-digit', 
                                minute: '2-digit' 
                            });
            } catch (e) {
                displayDate = comment.created_at.split('T')[0] || 'æœªçŸ¥æ—¥æœŸ';
            }
        }
        
        return `
            <div class="forum-post" data-id="${comment.id}">
                <div class="post-header">
                    <div class="post-author">${comment.user_name || 'åŒ¿åç”¨æˆ·'}</div>
                    <div class="post-date">${displayDate}</div>
                </div>
                <div class="post-content">
                    <p>${comment.content}</p>
                </div>
            </div>
        `;
    }

    // å°†å•æ¡æ–°è¯„è®ºæ·»åŠ åˆ°é¡µé¢é¡¶éƒ¨
    function prependComment(comment) {
        const commentHtml = formatComment(comment);
        
        // å¦‚æœå½“å‰æ˜¾ç¤º"æ²¡æœ‰è¯„è®º"çš„æ¶ˆæ¯ï¼Œå…ˆæ¸…é™¤å®ƒ
        const firstChild = forumPostsContainer.firstChild;
        if (firstChild && firstChild.textContent.includes('è¿˜æ²¡æœ‰è¯„è®º')) {
            forumPostsContainer.innerHTML = '';
        }
        
        // å°†æ–°è¯„è®ºæ’å…¥åˆ°é¡¶éƒ¨
        forumPostsContainer.insertAdjacentHTML('afterbegin', commentHtml);
    }

    // å‘è¡¨æ–°è¯„è®º
    async function postNewComment(content) {
        const username = localStorage.getItem('username');
        if (!username) {
            alert('è¯·å…ˆç™»å½•æ‰èƒ½å‘è¡¨è¯„è®º');
            return false;
        }
        
        if (!content.trim()) {
            alert('è¯„è®ºå†…å®¹ä¸èƒ½ä¸ºç©º');
            return false;
        }
        
        try {
            const { error } = await supabase
                .from('comments')
                .insert([{ 
                    user_name: username, 
                    content: content.trim(),
                    topic_id: forumTopicId 
                }]);

            if (error) {
                throw error;
            }
            
            return true;
        } catch (error) {
            console.error('å‘è¡¨è¯„è®ºå¤±è´¥:', error);
            alert('å‘è¡¨è¯„è®ºå¤±è´¥: ' + error.message);
            return false;
        }
    }

    // ==================== äº‹ä»¶å¤„ç† ====================
    function initializeEventListeners() {
        // ç™»å½•è¡¨å•æäº¤
        loginForm.addEventListener('submit', handleLoginSubmit);
        
        // æ³¨å†Œè¡¨å•æäº¤
        registerForm.addEventListener('submit', handleRegisterSubmit);
        
        // å‘è¡¨è¯„è®ºæŒ‰é’®ç‚¹å‡»
        submitPost.addEventListener('click', handleNewPostSubmit);
        
        // Ctrl+Enterå¿«æ·å‘è¡¨
        newPostContent.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                handleNewPostSubmit();
            }
        });
        
        // å…¨å±€ç‚¹å‡»äº‹ä»¶å§”æ‰˜
        document.addEventListener('click', handleGlobalClick);
    }

    // å¤„ç†ç™»å½•æäº¤
    function handleLoginSubmit(e) {
        e.preventDefault();
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;
        
        if (username && password) {
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('username', username);
            
            checkLoginStatus();
        } else {
            alert('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ');
        }
    }

    // å¤„ç†æ³¨å†Œæäº¤
    function handleRegisterSubmit(e) {
        e.preventDefault();
        const username = document.getElementById('register-username').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;
        const confirm = document.getElementById('register-confirm').value;
        
        if (!username || !email || !password || !confirm) {
            alert('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ');
            return;
        }
        
        if (password !== confirm) {
            alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
            return;
        }
        
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('username', username);
        
        checkLoginStatus();
    }

    // å¤„ç†æ–°è¯„è®ºæäº¤
    async function handleNewPostSubmit() {
        const content = newPostContent.value.trim();
        if (!content) {
            alert('è¯·è¾“å…¥è¯„è®ºå†…å®¹');
            return;
        }
        
        const success = await postNewComment(content);
        
        if (success) {
            newPostContent.value = '';
        }
    }

    // å¤„ç†å…¨å±€ç‚¹å‡»äº‹ä»¶
    function handleGlobalClick(e) {
        // å¤„ç†ç™»å½•/æ³¨å†Œåˆ‡æ¢
        if (e.target && e.target.id === 'toggle-link') {
            e.preventDefault();
            if (loginForm.classList.contains('hidden')) {
                showLoginForm();
            } else {
                showRegisterForm();
            }
        }
        
        // å¤„ç†å¯¼èˆªç‚¹å‡»
        if (e.target && e.target.classList.contains('nav-link')) {
            e.preventDefault();
            const target = e.target.getAttribute('data-target');
            
            // å¦‚æœæ˜¯é€€å‡ºç™»å½•
            if (target === 'login' && localStorage.getItem('isLoggedIn') === 'true') {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('username');
                
                // å–æ¶ˆè®ºå›è®¢é˜…
                if (commentsSubscription) {
                    supabase.removeChannel(commentsSubscription);
                    commentsSubscription = null;
                }
                
                checkLoginStatus();
                return;
            }
            
            showSection(target);
        }
    }

    // ==================== é¡µé¢åŠ è½½åˆå§‹åŒ– ====================
    document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
